<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Hzx8964&#39;Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Java">
<meta property="og:type" content="website">
<meta property="og:title" content="Hzx8964&#39;Blog">
<meta property="og:url" content="http://hzxiao.top/index.html">
<meta property="og:site_name" content="Hzx8964&#39;Blog">
<meta property="og:description" content="Java">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="hzx">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hzx8964&#39;Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hzx8964&#39;Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://hzxiao.top"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="Docker-Vue Nginx 服务器刷新404" class="article article-type-Docker" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/06/09/Vue%20Nginx%20%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%88%B7%E6%96%B0404/" class="article-date">
  <time datetime="2021-06-09T08:06:38.000Z" itemprop="datePublished">2021-06-09</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Docker/">Docker</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/06/09/Vue%20Nginx%20%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%88%B7%E6%96%B0404/">Docker 离线安装</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="前言："><a href="#前言：" class="headerlink" title="前言："></a>前言：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">今天vue项目build后，放到nginx的html目录下，浏览器刷新404</span><br></pre></td></tr></table></figure>

<h3 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># nginx转发路由添加 try_files $uri $uri&#x2F; &#x2F;index.html;</span><br><span class="line"></span><br><span class="line">location &#x2F; &#123;</span><br><span class="line">        root &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html;</span><br><span class="line">        try_files $uri $uri&#x2F; &#x2F;index.html;</span><br><span class="line">        index index.html;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://hzxiao.top/2021/06/09/Vue%20Nginx%20%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%88%B7%E6%96%B0404/" data-id="ckppbo2i90005x8e54rvq35q1" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Docker/" rel="tag">Docker</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="Docker-Docker 离线安装" class="article article-type-Docker" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/06/09/Docker%20%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85/" class="article-date">
  <time datetime="2021-06-09T08:06:38.000Z" itemprop="datePublished">2021-06-09</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Docker/">Docker</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/06/09/Docker%20%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85/">Docker 离线安装</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="前言："><a href="#前言：" class="headerlink" title="前言："></a>前言：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Docker 是一个开源的应用容器引擎，让开发者可以打包他们的应用以及依赖包到一个可移植的镜像中，然后发布到任何流行的 Linux或Windows 机器上，也可以实现虚拟化。容器是完全使用沙箱机制，相互之间不会有任何接口。</span><br><span class="line"></span><br><span class="line">一般服务器都是隔绝外网，所以离线安装docker的情况更多</span><br></pre></td></tr></table></figure>

<ol>
<li><h3 id="离线安装"><a href="#离线安装" class="headerlink" title="离线安装"></a>离线安装</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># a. 新能一个能联网的机子下载rpm包 </span><br><span class="line"># yum install xxx --downloadonly --downloaddir &#x2F;root&#x2F;soft </span><br><span class="line"># b. 拷贝到服务器上 </span><br><span class="line"># c. 执行安装命令 </span><br><span class="line"># rpm -ivh *.rpm --force --nodeps </span><br></pre></td></tr></table></figure></li>
<li><h3 id="在线安装"><a href="#在线安装" class="headerlink" title="在线安装"></a>在线安装</h3></li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">a. 卸载旧版本 </span><br><span class="line">\# yum remove docker \ </span><br><span class="line">docker-client \ </span><br><span class="line">docker-client-latest \ </span><br><span class="line">docker-common \ </span><br><span class="line">docker-latest \ </span><br><span class="line">docker-latest-logrotate \ </span><br><span class="line">docker-logrotate \ </span><br><span class="line">docker-engine </span><br><span class="line"></span><br><span class="line">b. 安装工具 </span><br><span class="line">\# yum install -y yum-utils \ </span><br><span class="line">device-mapper-persistent-data \ </span><br><span class="line">lvm2 </span><br><span class="line">c. 配置软件仓库 </span><br><span class="line">\# yum-config-manager \ </span><br><span class="line">--add-repo \ </span><br><span class="line">http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;docker-ce&#x2F;linux&#x2F;centos&#x2F;docker-ce.repo </span><br><span class="line">d. 安装 </span><br><span class="line">\# yum install docker-ce docker-ce-cli containerd.io </span><br><span class="line">e. 启动 </span><br><span class="line">\# systemctl start docker</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://hzxiao.top/2021/06/09/Docker%20%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85/" data-id="ckppbo2i70004x8e53ezg8qwv" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Docker/" rel="tag">Docker</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="Docker-Docker 快速入门" class="article article-type-Docker" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/06/09/Docker%20%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/" class="article-date">
  <time datetime="2021-06-09T08:06:38.000Z" itemprop="datePublished">2021-06-09</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Docker/">Docker</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/06/09/Docker%20%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/">Docker 快速使用</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="前言："><a href="#前言：" class="headerlink" title="前言："></a>前言：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Docker 是一个开源的应用容器引擎，让开发者可以打包他们的应用以及依赖包到一个可移植的镜像中，然后发布到任何流行的 Linux或Windows 机器上，也可以实现虚拟化。容器是完全使用沙箱机制，相互之间不会有任何接口。</span><br><span class="line"></span><br><span class="line">一般服务器都是隔绝外网，所以离线安装docker的情况更多</span><br></pre></td></tr></table></figure>

<h3 id="docker-启动"><a href="#docker-启动" class="headerlink" title="docker 启动"></a>docker 启动</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 查看docker版本</span></span><br><span class="line">docker -v</span><br><span class="line"><span class="meta">#</span><span class="bash"> 启动docker服务</span></span><br><span class="line">service docker start </span><br></pre></td></tr></table></figure>

<h3 id="docker-配置开机启动"><a href="#docker-配置开机启动" class="headerlink" title="docker  配置开机启动"></a>docker  配置开机启动</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 设置开机启动 </span><br><span class="line">systemctl enable docker.service </span><br><span class="line"># 关闭开机启动 </span><br><span class="line">systemctl disable docker.service</span><br></pre></td></tr></table></figure>

<h3 id="docker-compose-安装"><a href="#docker-compose-安装" class="headerlink" title="docker-compose 安装"></a>docker-compose 安装</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 离线上传资源复制到指定目录</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo cp docker-compose-Linux-x86_64 /usr/<span class="built_in">local</span>/bin/docker-compose</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 将可执行权限应用于二进制文件：</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo chmod +x /usr/<span class="built_in">local</span>/bin/docker-compose</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 创建软链：</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo ln -s /usr/<span class="built_in">local</span>/bin/docker-compose /usr/bin/docker-compose</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 测试是否安装成功：</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker-compose --version</span></span><br><span class="line">cker-compose version 1.24.1, build 4667896b</span><br></pre></td></tr></table></figure>

<h3 id="docker-离线上传镜像，导入镜像"><a href="#docker-离线上传镜像，导入镜像" class="headerlink" title="docker 离线上传镜像，导入镜像"></a>docker 离线上传镜像，导入镜像</h3><p>docker导入导出镜像 save、load</p>
<p>docker导入导出容器 export、import</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 离线上传镜像到指定目录</span></span><br><span class="line">docker load &lt; images.tar</span><br></pre></td></tr></table></figure>

<h3 id="后端项目镜像制作"><a href="#后端项目镜像制作" class="headerlink" title="后端项目镜像制作"></a>后端项目镜像制作</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 上传项目jar包</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 创建 Dockerfile 文件</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 创建创建镜像</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo docker build .</span></span><br></pre></td></tr></table></figure>

<p>Dockerfile</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>






















      
    </div>
    <footer class="article-footer">
      <a data-url="http://hzxiao.top/2021/06/09/Docker%20%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/" data-id="ckppbo2i10001x8e56n546rur" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Docker/" rel="tag">Docker</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="Docker-Docker 常用容器" class="article article-type-Docker" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/06/09/Docker%20%E5%B8%B8%E7%94%A8%E5%AE%B9%E5%99%A8/" class="article-date">
  <time datetime="2021-06-09T08:06:38.000Z" itemprop="datePublished">2021-06-09</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Docker/">Docker</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/06/09/Docker%20%E5%B8%B8%E7%94%A8%E5%AE%B9%E5%99%A8/">Docker 离线安装</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="前言："><a href="#前言：" class="headerlink" title="前言："></a>前言：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Docker 是一个开源的应用容器引擎，让开发者可以打包他们的应用以及依赖包到一个可移植的镜像中，然后发布到任何流行的 Linux或Windows 机器上，也可以实现虚拟化。容器是完全使用沙箱机制，相互之间不会有任何接口。</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">1. mysql docker run --name mysql -p 3306:3306 -e MYSQL_ROOT_PASSWORD=123456 -d mysql:5.7.19 </span><br><span class="line"></span><br><span class="line">2. nacos docker run --env MODE=standalone --name nacos -d -p 8848:8848 nacos/nacos-server </span><br><span class="line"></span><br><span class="line">3. redis </span><br><span class="line">docker run -itd --name redis -p 6379:6379 redis --appendonly yes --requirepass &quot;123456&quot; </span><br><span class="line"></span><br><span class="line">4. sentinel docker run --name sentinel -d -p 8858:8858 -d bladex/sentinel- dashboard </span><br><span class="line"></span><br><span class="line">5. postgresql docker run -d -p 5432:5432 --name postgresql -v pgdata:/home/pgsql/data -e POSTGRES_PASSWORD=123456 postgres </span><br><span class="line"></span><br><span class="line">6. pgadmin4 docker run -d -p 8087:80 --name pgadmin4 -e PGADMIN_DEFAULT_EMAIL=fjhzxiao@163.com -e PGADMIN_DEFAULT_PASSWORD=123456 dpage/pgadmin4 登陆用户名 fjhzxiao@163.com/123456 </span><br><span class="line"></span><br><span class="line">7. geoserver docker run -d -p 8080:8080 -v /home/geoserver/data_dir:/opt/geoserver/data_dir kartoza/geoserver </span><br><span class="line"></span><br><span class="line">8. jenkins docker run -d -p 8888:8080 -p 50001:50000 -v /home/jenkins_home2:/var/jenkins_home --name jenkins2 jenkins/jenkins docker-compose version: &#x27;3&#x27; services:</span><br><span class="line">jenkins: container_name: jenkins image: jenkins/jenkins restart: always ports: - 8888:8080 - 50000:50000 volumes: - /root/jenkins/jenkins_home:/var/jenkins_home - /etc/localtime:/etc/localtime:ro </span><br><span class="line"></span><br><span class="line">9. portainer </span><br><span class="line">docker-compose.yaml</span><br><span class="line">  version: &#x27;3&#x27; </span><br><span class="line">  services: </span><br><span class="line">  portainer: </span><br><span class="line">  image: portainer/portainer </span><br><span class="line">  ports: - &quot;9000:9000&quot; </span><br><span class="line">  volumes: </span><br><span class="line">    - &quot;/home/portainer/data:/data&quot; </span><br><span class="line">    - &quot;/var/run/docker.sock:/var/run/docker.sock&quot; </span><br><span class="line"></span><br><span class="line">10. nexus docker-compose.yaml version: &#x27;3&#x27; services: nexus: image: sonatype/nexus3 ports: - 8081:8081 volumes:</span><br><span class="line">- /root/nexus/nexus-data:/nexus-data</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://hzxiao.top/2021/06/09/Docker%20%E5%B8%B8%E7%94%A8%E5%AE%B9%E5%99%A8/" data-id="ckppbo2hw0000x8e56r59foxk" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Docker/" rel="tag">Docker</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="Spring-SpringBoot Profile" class="article article-type-Spring" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/05/17/SpringBoot%20Profile/" class="article-date">
  <time datetime="2021-05-17T04:45:38.000Z" itemprop="datePublished">2021-05-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Spring/">Spring</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/05/17/SpringBoot%20Profile/">Spring 静态属性加载配置</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="前言：-Spring采用静态类作为配置，但是属性需要从配置文件加载"><a href="#前言：-Spring采用静态类作为配置，但是属性需要从配置文件加载" class="headerlink" title="前言： Spring采用静态类作为配置，但是属性需要从配置文件加载"></a>前言： Spring采用静态类作为配置，但是属性需要从配置文件加载</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Config</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String ip;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>启动报错</p>
<p> Autowired annotation is not supported on static fields: public static</p>
<p>解决： 新增set方法，在set方法进行 @Value注入</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Config</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String ip;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;config.ip&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setIp</span><span class="params">(String ip)</span> </span>&#123;</span><br><span class="line">        Config.ip = ip;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://hzxiao.top/2021/05/17/SpringBoot%20Profile/" data-id="ckory311k00034oe5fiki79ty" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring/" rel="tag">Spring</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="SpringBoot-Spring Config Static Properties" class="article article-type-SpringBoot" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/05/17/Spring%20Config%20Static%20Properties/" class="article-date">
  <time datetime="2021-05-17T01:45:38.000Z" itemprop="datePublished">2021-05-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/SpringBoot/">SpringBoot</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/05/17/Spring%20Config%20Static%20Properties/">SpringBoot 多环境 配置文件 profile</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="前言：-SpringBoot-工程一般都会有多份配置文件，例如-default，dev，test，prod-等等，需要快速切换配置文件"><a href="#前言：-SpringBoot-工程一般都会有多份配置文件，例如-default，dev，test，prod-等等，需要快速切换配置文件" class="headerlink" title="前言： SpringBoot  工程一般都会有多份配置文件，例如 default，dev，test，prod 等等，需要快速切换配置文件"></a>前言： SpringBoot  工程一般都会有多份配置文件，例如 default，dev，test，prod 等等，需要快速切换配置文件</h3><ol>
<li><p>多文件，文件格式 application-{profile}.properties 或  application-{profile}.yml</p>
<ol>
<li>新建配置dev，prod即可</li>
<li>application-dev.properties / application-dev.yml</li>
<li>application-prod.properties / application-prod.yml</li>
</ol>
</li>
<li><p>多文档，yml通过 “—“ 进行文档分割</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">server:</span><br><span class="line">  port: 80</span><br><span class="line">spring:</span><br><span class="line">  profiles:</span><br><span class="line">    active: dev</span><br><span class="line">---</span><br><span class="line">spring:</span><br><span class="line">  profiles: default</span><br><span class="line">server:</span><br><span class="line">  port: 80    </span><br><span class="line">---</span><br><span class="line">spring:</span><br><span class="line">  profiles: dev</span><br><span class="line">server:</span><br><span class="line">  port: 8080</span><br><span class="line">---</span><br><span class="line">spring:</span><br><span class="line">  profiles: prod</span><br><span class="line">server:</span><br><span class="line">  port: 8085</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>使用指定配置</p>
<ol>
<li><p>配置文件配置</p>
<p>在配置文件中使用配置项指定使用环境，不建议，因为需要修改配置文件，不利于生产环境切换。</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span> <span class="string">dev</span></span><br></pre></td></tr></table></figure>

<p>或</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">spring.profiles.active</span>=<span class="string">dev</span></span><br></pre></td></tr></table></figure></li>
<li><p>java命令行启动配置，启动的时候指定。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">   java -jar java.jar --spring.profiles.active=dev</span><br><span class="line">   或</span><br><span class="line">java -jar java.jar -Dspring.profiles.active=dev</span><br><span class="line">   </span><br></pre></td></tr></table></figure></li>
<li><p>Configuration配置，Idea启动配置环境，配置虚拟机用的不多，不建议使用。</p>
</li>
</ol>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://hzxiao.top/2021/05/17/Spring%20Config%20Static%20Properties/" data-id="ckos3x00o0003o8e5gcej6xsr" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SpringBoot/" rel="tag">SpringBoot</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="Java-Java8 Stream Page Iterator" class="article article-type-Java" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/05/13/Java8%20Stream%20Page%20Iterator/" class="article-date">
  <time datetime="2021-05-13T08:06:38.000Z" itemprop="datePublished">2021-05-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Java/">Java</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/05/13/Java8%20Stream%20Page%20Iterator/">Java List 分页 遍历</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id=""><a href="#" class="headerlink" title=""></a></h3><h3 id="前言：-有这样一个需求，一次性查询出所有数据，然后分页遍历数据"><a href="#前言：-有这样一个需求，一次性查询出所有数据，然后分页遍历数据" class="headerlink" title="前言： 有这样一个需求，一次性查询出所有数据，然后分页遍历数据"></a>前言： 有这样一个需求，一次性查询出所有数据，然后分页遍历数据</h3><ol>
<li><p>java stream skip，  limit </p>
<h4 id="通过skip跳过数据，limit限制访问的数据，外层套一个页码循环，实现分页遍历List"><a href="#通过skip跳过数据，limit限制访问的数据，外层套一个页码循环，实现分页遍历List" class="headerlink" title="通过skip跳过数据，limit限制访问的数据，外层套一个页码循环，实现分页遍历List"></a>通过skip跳过数据，limit限制访问的数据，外层套一个页码循环，实现分页遍历List</h4></li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StreamExample</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">		<span class="comment">/**</span></span><br><span class="line"><span class="comment">     * List分页遍历</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">page</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        List&lt;Integer&gt; is = Arrays.asList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>);</span><br><span class="line">        <span class="comment">// 每页的数据</span></span><br><span class="line">        <span class="keyword">int</span> size = <span class="number">5</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> page = <span class="number">0</span>; page &lt; (is.size() - <span class="number">1</span>) / size + <span class="number">1</span>; page++) &#123;</span><br><span class="line">            is.stream().skip(page * size).limit(size).forEach(System.out::println);</span><br><span class="line">            System.out.println();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://hzxiao.top/2021/05/13/Java8%20Stream%20Page%20Iterator/" data-id="ckom75mdp0000q8e5al0f9cxn" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/" rel="tag">Java</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="JavaScript-JavaScript iterable" class="article article-type-JavaScript" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/04/29/JavaScript%20iterable/" class="article-date">
  <time datetime="2021-04-29T01:39:38.000Z" itemprop="datePublished">2021-04-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/04/29/JavaScript%20iterable/">JavaScript 循环 iterable</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="聊聊js中的循环，数组遍历"><a href="#聊聊js中的循环，数组遍历" class="headerlink" title="聊聊js中的循环，数组遍历"></a>聊聊js中的循环，数组遍历</h2><p>代码的组成无非就是，顺序，选择，循环。其中最重要的就是循环语句。</p>
<p>在js中，循环主要有，for, while。在es6里有一些新的方式。</p>
<h3 id="1、传统循环-for"><a href="#1、传统循环-for" class="headerlink" title="1、传统循环 for"></a>1、传统循环 for</h3><p>优点：方便获取数据下标。</p>
<p>缺点：容易存在变量污染。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">  <span class="built_in">console</span>.info(arr[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// logs 1,2,3,4,5</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="2、while-与for类似，这里不赘述"><a href="#2、while-与for类似，这里不赘述" class="headerlink" title="2、while 与for类似，这里不赘述"></a>2、while 与for类似，这里不赘述</h3><h3 id="3、Arrays对象内置的-forEach，调用方法，针对每一个元素执行。"><a href="#3、Arrays对象内置的-forEach，调用方法，针对每一个元素执行。" class="headerlink" title="3、Arrays对象内置的  forEach，调用方法，针对每一个元素执行。"></a>3、Arrays对象内置的  forEach，调用方法，针对每一个元素执行。</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];  </span><br><span class="line">arr.forEach(<span class="function">(<span class="params">value, index, array</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// value 当前遍历值</span></span><br><span class="line">  <span class="comment">// index 下标</span></span><br><span class="line">  <span class="comment">// array 数组对象</span></span><br><span class="line">  <span class="built_in">console</span>.info(value);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// logs 1,2,3,4,5</span></span><br></pre></td></tr></table></figure>

<h3 id="4、some-every"><a href="#4、some-every" class="headerlink" title="4、some, every"></a>4、some, every</h3><p>在 for 循环中可以通过break进行提前结束循环。continue结束当前循环。</p>
<p>在es6中， some，every 本质是判断所有元素是否符合条件， some 只要有一个返回true 就结束循环。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// some，在满足条件后就会结束循环，every则相反，有一个不满足则结束</span></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>];</span><br><span class="line">arr.some(<span class="function"><span class="params">v</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.info(v);</span><br><span class="line">  <span class="keyword">return</span> v &gt; <span class="number">2</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// logs 1,2,3</span></span><br></pre></td></tr></table></figure>

<p>every 只要有一个返回 false就结束循环。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>];</span><br><span class="line">arr.every(<span class="function"><span class="params">v</span> =&gt;</span> &#123; </span><br><span class="line">  <span class="built_in">console</span>.info(v);</span><br><span class="line">  <span class="keyword">return</span> v &lt; <span class="number">3</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// logs 1,2,3</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="5、map-转换，遍历每一个元素，做对应的转换，返回结果"><a href="#5、map-转换，遍历每一个元素，做对应的转换，返回结果" class="headerlink" title="5、map 转换，遍历每一个元素，做对应的转换，返回结果"></a>5、map 转换，遍历每一个元素，做对应的转换，返回结果</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>];</span><br><span class="line">arr.map(<span class="function"><span class="params">v</span> =&gt;</span> v + <span class="number">1</span>).forEach(<span class="function"><span class="params">v</span> =&gt;</span> <span class="built_in">console</span>.info(v));</span><br><span class="line"><span class="comment">// logs 2,3,4,5,6,7</span></span><br></pre></td></tr></table></figure>

<h3 id="6、filter-过滤，过滤出符合条件的项"><a href="#6、filter-过滤，过滤出符合条件的项" class="headerlink" title="6、filter 过滤，过滤出符合条件的项"></a>6、filter 过滤，过滤出符合条件的项</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>];</span><br><span class="line">arr.filter(<span class="function"><span class="params">v</span> =&gt;</span> v &gt; <span class="number">3</span>).forEach(<span class="function"><span class="params">v</span> =&gt;</span> <span class="built_in">console</span>.info(v));</span><br><span class="line"><span class="comment">// logs 4,5,6</span></span><br></pre></td></tr></table></figure>

<h3 id="7、for-in-、for-of-遍历"><a href="#7、for-in-、for-of-遍历" class="headerlink" title="7、for..in 、for..of  遍历"></a>7、for..in 、for..of  遍历</h3><p> for..in 迭代自身属性，不建议用于遍历数组。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  a: <span class="number">1</span>,</span><br><span class="line">  b: <span class="number">2</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> k <span class="keyword">in</span> obj) &#123;</span><br><span class="line">  <span class="built_in">console</span>.info(k);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// logs a,b</span></span><br></pre></td></tr></table></figure>

<p> for..of 在可迭代对象（包括 Array，Map，Set，String，TypedArray，arguments 对象等遍历。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> v <span class="keyword">of</span> arr) &#123;</span><br><span class="line">  <span class="built_in">console</span>.info(v);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// logs a,b,c</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> iterable = <span class="string">&quot;abc&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> v <span class="keyword">of</span> iterable) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(v);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// logs a,b,c</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



      
    </div>
    <footer class="article-footer">
      <a data-url="http://hzxiao.top/2021/04/29/JavaScript%20iterable/" data-id="cko2fghyn0003oce543a1ctkn" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="Kettle-Kettle InputUpdate" class="article article-type-Kettle" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/04/27/Kettle%20InputUpdate/" class="article-date">
  <time datetime="2021-04-27T09:03:38.000Z" itemprop="datePublished">2021-04-27</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Kettle/">Kettle</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/04/27/Kettle%20InputUpdate/">Kettle 插入/更新(Kettle Insert/Update)</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Kettle Input/Update</p>
<p>插入与更新，判断目标数据与原数据一致，强制更新。</p>
<p>与同步最大的区别是，原数据如果删除，目标数据不会删除。</p>
<p>1、自行创建 source,target 表</p>
<p>2、拖入 TableInput 配置数据库连接，SQL</p>
<p><img src="/img/image-20210427114151451.png" alt="image-20210427114151451"></p>
<p>3、拖入 Input/Update</p>
<p><img src="/img/image-20210427114146642.png" alt="image-20210427114146642"></p>
<p>4、执行 Kettle发现，source，target 保持一致，source删除，target并不会删除</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://hzxiao.top/2021/04/27/Kettle%20InputUpdate/" data-id="cknzhbfn70008xse5dq3rdxpu" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Kettle/" rel="tag">Kettle</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="Kettle-Kettle Data Sync" class="article article-type-Kettle" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/04/27/Kettle%20Data%20Sync/" class="article-date">
  <time datetime="2021-04-27T02:03:38.000Z" itemprop="datePublished">2021-04-27</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Kettle/">Kettle</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/04/27/Kettle%20Data%20Sync/">Kettle 数据同步(Kettle Synchronize after merge)</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Kettle 数据同步</p>
<p>同步的概念，原数据表（数据变化，新增，修改，删除），目标数据表（数据不变化），经过kettle处理，保持目标数据表与原数据表一致。</p>
<p>1、新建数据表 user_source, user_target   </p>
<p>id作为主键，其他字段若干</p>
<p>2、Kettle 拖入两个 Table Input，修改名称为 Source， Target</p>
<p><img src="/img/image-20210427111123181.png" alt="image-20210427111123181"></p>
<p>配置数据库连接地址，编写SQL，分别查询 user_source, user_target   </p>
<p>3、拖入合并（比较）</p>
<p>从Joins 拖入 Merge rows（diff）</p>
<p><img src="/img/image-20210427112308832.png" alt="image-20210427112308832"></p>
<p>注意： 原始数据，以及对比数据，不能弄错。</p>
<p>Reference rows origin 需要被同步的表</p>
<p>Compare rows origin 会变更数据的原始表</p>
<p>Flag fieldname 系统默认，添加数据差异字段（identical， new，changed， deleted）不要修改</p>
<p>Keys to match 比较数据是否相同的字段</p>
<p>Values to compare 需要更新的字段</p>
<p><img src="/img/image-20210427111732584.png" alt="image-20210427111732584"></p>
<p>添加日志可以查看合并后的数据</p>
<p>4、同步数据</p>
<p>拖入 Synchronize after merge 连接 Merge rows</p>
<p><img src="/img/image-20210427111903879.png" alt="image-20210427111903879"></p>
<p>配置同步</p>
<p>General 基本配置</p>
<p><img src="/img/image-20210427112107717.png" alt="image-20210427112107717"></p>
<p>Advanced</p>
<p><img src="/img/image-20210427111955219.png" alt="image-20210427111955219"></p>
<p>配置完成，即可执行。</p>
<p>测试，修改  user_source  里面的任意数据，执行 Kettle 转换，user_target 数据会修改，与 user_source 同步。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://hzxiao.top/2021/04/27/Kettle%20Data%20Sync/" data-id="ckom75mdz0004q8e51elq7jm9" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Kettle/" rel="tag">Kettle</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">下一页 &amp;raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Docker/">Docker</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/JavaScript/">JavaScript</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kettle/">Kettle</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/">Spring</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/SpringBoot/">SpringBoot</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/kettle/">kettle</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/ureport2/">ureport2</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker/" rel="tag">Docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/" rel="tag">Hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/" rel="tag">Java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kettle/" rel="tag">Kettle</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NodeJs/" rel="tag">NodeJs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring/" rel="tag">Spring</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SpringBoot/" rel="tag">SpringBoot</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kettle/" rel="tag">kettle</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ureport2/" rel="tag">ureport2</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/Docker/" style="font-size: 20px;">Docker</a> <a href="/tags/Hexo/" style="font-size: 10px;">Hexo</a> <a href="/tags/Java/" style="font-size: 10px;">Java</a> <a href="/tags/JavaScript/" style="font-size: 10px;">JavaScript</a> <a href="/tags/Kettle/" style="font-size: 15px;">Kettle</a> <a href="/tags/NodeJs/" style="font-size: 10px;">NodeJs</a> <a href="/tags/Spring/" style="font-size: 10px;">Spring</a> <a href="/tags/SpringBoot/" style="font-size: 10px;">SpringBoot</a> <a href="/tags/kettle/" style="font-size: 10px;">kettle</a> <a href="/tags/ureport2/" style="font-size: 15px;">ureport2</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">六月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">五月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">四月 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/06/09/Vue%20Nginx%20%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%88%B7%E6%96%B0404/">Docker 离线安装</a>
          </li>
        
          <li>
            <a href="/2021/06/09/Docker%20%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85/">Docker 离线安装</a>
          </li>
        
          <li>
            <a href="/2021/06/09/Docker%20%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/">Docker 快速使用</a>
          </li>
        
          <li>
            <a href="/2021/06/09/Docker%20%E5%B8%B8%E7%94%A8%E5%AE%B9%E5%99%A8/">Docker 离线安装</a>
          </li>
        
          <li>
            <a href="/2021/05/17/SpringBoot%20Profile/">Spring 静态属性加载配置</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2021 hzx<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>