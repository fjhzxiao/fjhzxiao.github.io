<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Hzx8964&#39;Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Java">
<meta property="og:type" content="website">
<meta property="og:title" content="Hzx8964&#39;Blog">
<meta property="og:url" content="http://hzxiao.top/index.html">
<meta property="og:site_name" content="Hzx8964&#39;Blog">
<meta property="og:description" content="Java">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="hzx">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hzx8964&#39;Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hzx8964&#39;Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://hzxiao.top"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="Docker Nginx-Docker Nginx" class="article article-type-Docker Nginx" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/06/11/Docker%20Nginx/" class="article-date">
  <time datetime="2021-06-11T08:06:38.000Z" itemprop="datePublished">2021-06-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Docker/">Docker</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/06/11/Docker%20Nginx/">Docker Nginx</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="前言：-Nginx-使用docker快速部署"><a href="#前言：-Nginx-使用docker快速部署" class="headerlink" title="前言： Nginx 使用docker快速部署"></a>前言： Nginx 使用docker快速部署</h3><h3 id="docker安装请参考"><a href="#docker安装请参考" class="headerlink" title="docker安装请参考"></a>docker安装请参考</h3><p>前端打包成镜像，或者可以将html目录挂载出来</p>
<p>Dockerfile </p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> nginx</span><br><span class="line"><span class="keyword">VOLUME</span><span class="bash"> /tmp</span></span><br><span class="line"><span class="keyword">ENV</span> LANG en_US.UTF-<span class="number">8</span></span><br><span class="line"><span class="keyword">ADD</span><span class="bash"> ./dist/ /usr/share/nginx/html/</span></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">80</span></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">443</span></span><br></pre></td></tr></table></figure>

<p>打包前端镜像</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> frontend_dir</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker build .</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker tag IMAGE_ID IMAGE_NAME:VERSION</span></span><br></pre></td></tr></table></figure>

<h3 id="Nginx启动"><a href="#Nginx启动" class="headerlink" title="Nginx启动"></a>Nginx启动</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 8088:80 IMAGE_NAME:VERSION</span><br></pre></td></tr></table></figure>

<h3 id="Nginx-Docker-compose启动"><a href="#Nginx-Docker-compose启动" class="headerlink" title="Nginx Docker-compose启动"></a>Nginx Docker-compose启动</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">docker-compose.yaml</span></span><br><span class="line"><span class="attr">version:</span> <span class="number">3</span></span><br><span class="line"><span class="attr">services:</span> </span><br><span class="line">  <span class="attr">nginx:</span></span><br><span class="line">    <span class="attr">images:</span> <span class="string">nginx</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">8088</span><span class="string">:80</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">443</span><span class="string">:443</span></span><br><span class="line">    <span class="attr">volumnes:</span></span><br><span class="line"><span class="comment">#      - /home/project/html/:/usr/share/nginx/html/</span></span><br><span class="line"><span class="comment">#      - /home/project/nginx/nginx.conf:/etc/nginx/nginx.conf</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/home/project/nginx/conf.d:/etc/nginx/conf.d</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="创建前端的基于Nginx的镜像，nginx转发配置"><a href="#创建前端的基于Nginx的镜像，nginx转发配置" class="headerlink" title="创建前端的基于Nginx的镜像，nginx转发配置"></a>创建前端的基于Nginx的镜像，nginx转发配置</h3><p>defulat.conf</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen       80;</span><br><span class="line">    server_name  localhost;</span><br><span class="line"></span><br><span class="line">    #charset koi8-r;</span><br><span class="line">    #access_log  &#x2F;var&#x2F;log&#x2F;nginx&#x2F;host.access.log  main;</span><br><span class="line"></span><br><span class="line">    location &#x2F; &#123;</span><br><span class="line">        root &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html;</span><br><span class="line">        index index.html;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    # 后台地址转发，backend为后台地址</span><br><span class="line">    location &#x2F;api&#x2F; &#123;</span><br><span class="line">        proxy_pass        http:&#x2F;&#x2F;backend&#x2F;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    error_page   500 502 503 504  &#x2F;50x.html;</span><br><span class="line">    location &#x3D; &#x2F;50x.html &#123;</span><br><span class="line">        root   &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://hzxiao.top/2021/06/11/Docker%20Nginx/" data-id="ckprq1uc4000qake51ujv9s3j" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Docker/" rel="tag">Docker</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="Docker-Docker Jenkins Install" class="article article-type-Docker" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/06/10/Docker%20Jenkins%20Install/" class="article-date">
  <time datetime="2021-06-10T01:32:38.000Z" itemprop="datePublished">2021-06-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Docker/">Docker</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/06/10/Docker%20Jenkins%20Install/">Docker Jenkins 部署</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="前言："><a href="#前言：" class="headerlink" title="前言："></a>前言：</h3><p>Docker 是一个开源的应用容器引擎，让开发者可以打包他们的应用以及依赖包到一个可移植的镜像中，然后发布到任何流行的 Linux或Windows 机器上，也可以实现虚拟化。容器是完全使用沙箱机制，相互之间不会有任何接口。</p>
<p>Jenkins是一个开源的、提供友好操作界面的持续集成(CI)工具，起源于Hudson（Hudson是商用的），主要用于持续、自动的构建/测试软件项目、监控外部任务的运行。Jenkins用Java语言编写，可在Tomcat等流行的servlet容器中运行，也可独立运行。通常与版本管理工具(SCM)、构建工具结合使用。常用的版本控制工具有SVN、Git，构建工具有Maven、Ant、Gradle等。</p>
<p>Docker Jenkins的安装，镜像选择，jenkins和jenkins\jenkins都是官方的镜像，前者已经不维护了，推荐使用后者。</p>
<p>PS: 如果不能联网，从能联网的主机拉取镜像，然后保存，导入</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker pull jenkins/jenkins</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker save jenkins/jenkins &gt; jenkins.tar</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 上传到服务器</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker load &lt; jenkins.tar</span></span><br></pre></td></tr></table></figure>



<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 搜索jenkins镜像</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker search jenkins</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 拉取镜像</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker pull jenkins/jenkins</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看镜像</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker images</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 创建本地挂载目录</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> mkdir /data/jenkins_home</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 创建jenkins容器</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> </span></span><br></pre></td></tr></table></figure>

<p><img src="/img/image-20210610093418120.png" alt="image-20210610093418120"></p>
<p>创建jenkins容器</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker-compose up -d</span></span><br></pre></td></tr></table></figure>

<p>通过Docker-compose 编排，推荐。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3&#x27;</span> </span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">jenkins:</span> </span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">jenkins</span> </span><br><span class="line">    <span class="attr">image:</span> <span class="string">jenkins/jenkins</span> </span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span> </span><br><span class="line">    <span class="attr">user:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">ports:</span> </span><br><span class="line">      <span class="bullet">-</span> <span class="number">8888</span><span class="string">:8080</span> </span><br><span class="line">      <span class="bullet">-</span> <span class="number">50000</span><span class="string">:50000</span> </span><br><span class="line">    <span class="attr">volumes:</span> </span><br><span class="line">      <span class="bullet">-</span> <span class="string">/data/jenkins/jenkins_home:/var/jenkins_home</span> </span><br><span class="line">      <span class="bullet">-</span> <span class="string">/etc/localtime:/etc/localtime:ro</span></span><br></pre></td></tr></table></figure>

<p><img src="/img/image-20210610095012160.png" alt="image-20210610095012160"></p>
<p>容器创建并启动成功，留意控制台，拷贝密码登陆的时候需要使用。</p>
<p>打开浏览器访问</p>
<p><a target="_blank" rel="noopener" href="http://127.0.0.1:8888/">http://127.0.0.1:8888/</a> 耐心等待~</p>
<p><img src="/img/image-20210610100944217.png" alt="image-20210610100944217"></p>
<p>输入控制台打印出来的密码</p>
<p><img src="/img/image-20210610101039130.png" alt="image-20210610101039130"></p>
<p>等待~</p>
<p><img src="/img/image-20210610101139009.png" alt="image-20210610101139009"></p>
<p>注意选择这个，暂时先不安装推荐插件</p>
<p><img src="/img/image-20210610101215178.png" alt="image-20210610101215178"></p>
<p>取消所有推荐插件</p>
<p><img src="/img/image-20210610101257754.png" alt="image-20210610101257754"></p>
<p>创建账号</p>
<p><img src="/img/image-20210610101328613.png" alt="image-20210610101328613"></p>
<p>默认</p>
<p><img src="/img/image-20210610101400815.png" alt="image-20210610101400815"></p>
<p>jenkins配置完成</p>
<p><img src="/img/image-20210610101414301.png" alt="image-20210610101414301"></p>
<p>插件下载</p>
<p><img src="/img/image-20210610101510306.png" alt="image-20210610101510306"></p>
<p><img src="/img/image-20210610101756747.png" alt="image-20210610101756747"></p>
<p><img src="/img/image-20210610101809178.png" alt="image-20210610101809178"></p>
<p><img src="/img/image-20210610101823106.png" alt="image-20210610101823106"></p>
<p>配置Update Site的url</p>
<p><a target="_blank" rel="noopener" href="https://mirrors.tuna.tsinghua.edu.cn/jenkins/updates/update-center.json">https://mirrors.tuna.tsinghua.edu.cn/jenkins/updates/update-center.json</a></p>
<p><img src="/img/image-20210610101950966.png" alt="image-20210610101950966"></p>
<p>然后到jenkins挂载目录下</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 具体目录根据自己挂载的情况</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> /data/jenkins/jenkins_home/updates</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 备份配置</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> cp default.json default.json.bak</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 替换url</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo sed -i <span class="string">&#x27;s/http:\/\/updates.jenkins-ci.org\/download/https:\/\/mirrors.tuna.tsinghua.edu.cn\/jenkins/g&#x27;</span> default.json &amp;&amp; sudo sed -i <span class="string">&#x27;s/http:\/\/www.google.com/https:\/\/www.baidu.com/g&#x27;</span> default.json</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 重新启动容器</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker restart jenkins</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>重新登陆jenkins，感受光速下载吧~</p>
<p>选择插件</p>
<p><img src="/img/image-20210610102455639.png" alt="image-20210610102455639"></p>
<p>等待插件下载完成</p>
<p><img src="/img/image-20210610102545275.png" alt="image-20210610102545275"></p>
<p>勾选插件下载完成自动重启</p>
<p><img src="/img/image-20210610102605215.png" alt="image-20210610102605215"></p>
<p>部署完成~</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://hzxiao.top/2021/06/10/Docker%20Jenkins%20Install/" data-id="ckpro56d10009ake52b02evqw" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Docker/" rel="tag">Docker</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="Docker-Docker Jenkins Start Error " class="article article-type-Docker" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/06/10/Docker%20Jenkins%20Start%20Error%20/" class="article-date">
  <time datetime="2021-06-10T01:32:38.000Z" itemprop="datePublished">2021-06-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Docker/">Docker</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/06/10/Docker%20Jenkins%20Start%20Error%20/">Docker Start Permission denied 启动报错</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="前言："><a href="#前言：" class="headerlink" title="前言："></a>前言：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Docker 是一个开源的应用容器引擎，让开发者可以打包他们的应用以及依赖包到一个可移植的镜像中，然后发布到任何流行的 Linux或Windows 机器上，也可以实现虚拟化。容器是完全使用沙箱机制，相互之间不会有任何接口。</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Docker启动jenkins 后报错</p>
<p><img src="/img/image-20210610094554094.png" alt="image-20210610094554094"></p>
<p>原因：</p>
<p>volume对应的持久化文件夹所有者不是jenkins。</p>
<p>解决方案：</p>
<p>修改权限</p>
<p>1、docker-compose.yaml 添加  user</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3&#x27;</span> </span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">jenkins:</span> </span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">jenkins</span> </span><br><span class="line">    <span class="attr">image:</span> <span class="string">jenkins/jenkins</span> </span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span> </span><br><span class="line">    <span class="attr">ports:</span> </span><br><span class="line">      <span class="bullet">-</span> <span class="number">8888</span><span class="string">:8080</span> </span><br><span class="line">      <span class="bullet">-</span> <span class="number">50000</span><span class="string">:50000</span> </span><br><span class="line">    <span class="attr">volumes:</span> </span><br><span class="line">      <span class="bullet">-</span> <span class="string">/data/jenkins/jenkins_home:/var/jenkins_home</span> </span><br><span class="line">      <span class="bullet">-</span> <span class="string">/etc/localtime:/etc/localtime:ro</span></span><br></pre></td></tr></table></figure>

<p>3、docker</p>
<p>启动添加  -u root</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> jenkins docker run -d \</span></span><br><span class="line"><span class="bash">-u root \</span></span><br><span class="line"><span class="bash">-p 8888:8080 \</span></span><br><span class="line"><span class="bash">-p 50001:50000 \</span></span><br><span class="line"><span class="bash">-v /home/jenkins_home2:/var/jenkins_home</span> </span><br><span class="line">--name jenkins jenkins/jenkins </span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://hzxiao.top/2021/06/10/Docker%20Jenkins%20Start%20Error%20/" data-id="ckpro50wf0006ake5glineoxn" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Docker/" rel="tag">Docker</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Untitled" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/06/10/Untitled/" class="article-date">
  <time datetime="2021-06-10T01:12:59.365Z" itemprop="datePublished">2021-06-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://hzxiao.top/2021/06/10/Untitled/" data-id="ckpq7igpj00008ge5gj6o01i6" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="Docker-Docker Offline Install" class="article article-type-Docker" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/06/09/Docker%20Offline%20Install/" class="article-date">
  <time datetime="2021-06-09T08:06:38.000Z" itemprop="datePublished">2021-06-09</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Docker/">Docker</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/06/09/Docker%20Offline%20Install/">Docker 离线安装</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="前言："><a href="#前言：" class="headerlink" title="前言："></a>前言：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Docker 是一个开源的应用容器引擎，让开发者可以打包他们的应用以及依赖包到一个可移植的镜像中，然后发布到任何流行的 Linux或Windows 机器上，也可以实现虚拟化。容器是完全使用沙箱机制，相互之间不会有任何接口。</span><br><span class="line"></span><br><span class="line">一般服务器都是隔绝外网，所以离线安装docker的情况更多</span><br></pre></td></tr></table></figure>

<ol>
<li><h3 id="离线安装"><a href="#离线安装" class="headerlink" title="离线安装"></a>离线安装</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># a. 新能一个能联网的机子下载rpm包 </span><br><span class="line"># yum install xxx --downloadonly --downloaddir &#x2F;root&#x2F;soft </span><br><span class="line"># b. 拷贝到服务器上 </span><br><span class="line"># c. 执行安装命令 </span><br><span class="line"># rpm -ivh *.rpm --force --nodeps </span><br></pre></td></tr></table></figure></li>
<li><h3 id="在线安装"><a href="#在线安装" class="headerlink" title="在线安装"></a>在线安装</h3></li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">a. 卸载旧版本 </span><br><span class="line">\# yum remove docker \ </span><br><span class="line">docker-client \ </span><br><span class="line">docker-client-latest \ </span><br><span class="line">docker-common \ </span><br><span class="line">docker-latest \ </span><br><span class="line">docker-latest-logrotate \ </span><br><span class="line">docker-logrotate \ </span><br><span class="line">docker-engine </span><br><span class="line"></span><br><span class="line">b. 安装工具 </span><br><span class="line">\# yum install -y yum-utils \ </span><br><span class="line">device-mapper-persistent-data \ </span><br><span class="line">lvm2 </span><br><span class="line">c. 配置软件仓库 </span><br><span class="line">\# yum-config-manager \ </span><br><span class="line">--add-repo \ </span><br><span class="line">http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;docker-ce&#x2F;linux&#x2F;centos&#x2F;docker-ce.repo </span><br><span class="line">d. 安装 </span><br><span class="line">\# yum install docker-ce docker-ce-cli containerd.io </span><br><span class="line">e. 启动 </span><br><span class="line">\# systemctl start docker</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://hzxiao.top/2021/06/09/Docker%20Offline%20Install/" data-id="ckpro4u010003ake5fr4m19mg" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Docker/" rel="tag">Docker</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="Docker-Docker HelloWorld" class="article article-type-Docker" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/06/09/Docker%20HelloWorld/" class="article-date">
  <time datetime="2021-06-09T08:06:38.000Z" itemprop="datePublished">2021-06-09</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Docker/">Docker</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/06/09/Docker%20HelloWorld/">Docker 快速入门 使用</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="前言："><a href="#前言：" class="headerlink" title="前言："></a>前言：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Docker 是一个开源的应用容器引擎，让开发者可以打包他们的应用以及依赖包到一个可移植的镜像中，然后发布到任何流行的 Linux或Windows 机器上，也可以实现虚拟化。容器是完全使用沙箱机制，相互之间不会有任何接口。</span><br><span class="line"></span><br><span class="line">一般服务器都是隔绝外网，所以离线安装docker的情况更多</span><br></pre></td></tr></table></figure>

<h3 id="docker-启动"><a href="#docker-启动" class="headerlink" title="docker 启动"></a>docker 启动</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 查看docker版本</span></span><br><span class="line">docker -v</span><br><span class="line"><span class="meta">#</span><span class="bash"> 启动docker服务</span></span><br><span class="line">service docker start </span><br></pre></td></tr></table></figure>

<h3 id="docker-配置开机启动"><a href="#docker-配置开机启动" class="headerlink" title="docker  配置开机启动"></a>docker  配置开机启动</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 设置开机启动 </span><br><span class="line">systemctl enable docker.service </span><br><span class="line"># 关闭开机启动 </span><br><span class="line">systemctl disable docker.service</span><br></pre></td></tr></table></figure>

<h3 id="docker-compose-安装"><a href="#docker-compose-安装" class="headerlink" title="docker-compose 安装"></a>docker-compose 安装</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 离线上传资源复制到指定目录</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo cp docker-compose-Linux-x86_64 /usr/<span class="built_in">local</span>/bin/docker-compose</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 将可执行权限应用于二进制文件：</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo chmod +x /usr/<span class="built_in">local</span>/bin/docker-compose</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 创建软链：</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo ln -s /usr/<span class="built_in">local</span>/bin/docker-compose /usr/bin/docker-compose</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 测试是否安装成功：</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker-compose --version</span></span><br><span class="line">cker-compose version 1.24.1, build 4667896b</span><br></pre></td></tr></table></figure>

<h3 id="docker-离线上传镜像，导入镜像"><a href="#docker-离线上传镜像，导入镜像" class="headerlink" title="docker 离线上传镜像，导入镜像"></a>docker 离线上传镜像，导入镜像</h3><p>docker导入导出镜像 save、load</p>
<p>docker导入导出容器 export、import</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 离线上传镜像到指定目录</span></span><br><span class="line">docker load &lt; images.tar</span><br></pre></td></tr></table></figure>

<h3 id="后端项目镜像制作"><a href="#后端项目镜像制作" class="headerlink" title="后端项目镜像制作"></a>后端项目镜像制作</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 上传项目jar包</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 创建 Dockerfile 文件</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 创建创建镜像</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo docker build .</span></span><br></pre></td></tr></table></figure>

<p>Dockerfile</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>






















      
    </div>
    <footer class="article-footer">
      <a data-url="http://hzxiao.top/2021/06/09/Docker%20HelloWorld/" data-id="ckpro4lfs0000ake563oz7zw4" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Docker/" rel="tag">Docker</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="Nginx Vue-Vue Nginx Refresh 404" class="article article-type-Nginx Vue" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/06/09/Vue%20Nginx%20Refresh%20404/" class="article-date">
  <time datetime="2021-06-09T08:06:38.000Z" itemprop="datePublished">2021-06-09</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Nginx-Vue/">Nginx Vue</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/06/09/Vue%20Nginx%20Refresh%20404/">Vue Nginx 服务器 地址刷新 404</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="前言："><a href="#前言：" class="headerlink" title="前言："></a>前言：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">今天vue项目build后，放到nginx的html目录下，浏览器刷新404</span><br></pre></td></tr></table></figure>

<h3 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># nginx转发路由添加 try_files $uri $uri&#x2F; &#x2F;index.html;</span><br><span class="line"></span><br><span class="line">location &#x2F; &#123;</span><br><span class="line">        root &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html;</span><br><span class="line">        try_files $uri $uri&#x2F; &#x2F;index.html;</span><br><span class="line">        index index.html;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://hzxiao.top/2021/06/09/Vue%20Nginx%20Refresh%20404/" data-id="ckpro5j8e000fake5gz3w2k7o" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Nginx-Vue/" rel="tag">Nginx Vue</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="Docker-Docker Container" class="article article-type-Docker" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/06/09/Docker%20Container/" class="article-date">
  <time datetime="2021-06-09T08:06:38.000Z" itemprop="datePublished">2021-06-09</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Docker/">Docker</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/06/09/Docker%20Container/">Docker 常用容器</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="前言："><a href="#前言：" class="headerlink" title="前言："></a>前言：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Docker 是一个开源的应用容器引擎，让开发者可以打包他们的应用以及依赖包到一个可移植的镜像中，然后发布到任何流行的 Linux或Windows 机器上，也可以实现虚拟化。容器是完全使用沙箱机制，相互之间不会有任何接口。</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">1. mysql docker run --name mysql -p 3306:3306 -e MYSQL_ROOT_PASSWORD=123456 -d mysql:5.7.19 </span><br><span class="line"></span><br><span class="line">2. nacos docker run --env MODE=standalone --name nacos -d -p 8848:8848 nacos/nacos-server </span><br><span class="line"></span><br><span class="line">3. redis </span><br><span class="line">docker run -itd --name redis -p 6379:6379 redis --appendonly yes --requirepass &quot;123456&quot; </span><br><span class="line"></span><br><span class="line">4. sentinel docker run --name sentinel -d -p 8858:8858 -d bladex/sentinel- dashboard </span><br><span class="line"></span><br><span class="line">5. postgresql docker run -d -p 5432:5432 --name postgresql -v pgdata:/home/pgsql/data -e POSTGRES_PASSWORD=123456 postgres </span><br><span class="line"></span><br><span class="line">6. pgadmin4 docker run -d -p 8087:80 --name pgadmin4 -e PGADMIN_DEFAULT_EMAIL=fjhzxiao@163.com -e PGADMIN_DEFAULT_PASSWORD=123456 dpage/pgadmin4 登陆用户名 fjhzxiao@163.com/123456 </span><br><span class="line"></span><br><span class="line">7. geoserver docker run -d -p 8080:8080 -v /home/geoserver/data_dir:/opt/geoserver/data_dir kartoza/geoserver </span><br><span class="line"></span><br><span class="line">8. jenkins docker run -d -p 8888:8080 -p 50001:50000 -v /home/jenkins_home2:/var/jenkins_home --name jenkins2 jenkins/jenkins </span><br><span class="line"></span><br><span class="line">docker-compose </span><br><span class="line">version: &#x27;3&#x27; </span><br><span class="line">services:</span><br><span class="line">jenkins: container_name: jenkins </span><br><span class="line">image: jenkins/jenkins </span><br><span class="line">restart: always </span><br><span class="line">ports: - 8888:8080 - 50000:50000 </span><br><span class="line">volumes: - /root/jenkins/jenkins_home:/var/jenkins_home - /etc/localtime:/etc/localtime:ro </span><br><span class="line"></span><br><span class="line">9. portainer </span><br><span class="line">docker-compose.yaml</span><br><span class="line">  version: &#x27;3&#x27; </span><br><span class="line">  services: </span><br><span class="line">  portainer: </span><br><span class="line">  image: portainer/portainer </span><br><span class="line">  ports: - &quot;9000:9000&quot; </span><br><span class="line">  volumes: </span><br><span class="line">    - &quot;/home/portainer/data:/data&quot; </span><br><span class="line">    - &quot;/var/run/docker.sock:/var/run/docker.sock&quot; </span><br><span class="line"></span><br><span class="line">10. nexus docker-compose.yaml version: &#x27;3&#x27; services: nexus: image: sonatype/nexus3 ports: - 8081:8081 volumes:</span><br><span class="line">- /root/nexus/nexus-data:/nexus-data</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://hzxiao.top/2021/06/09/Docker%20Container/" data-id="ckpro5c2o000cake596u068hm" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Docker/" rel="tag">Docker</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="Spring-SpringBoot Profile" class="article article-type-Spring" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/05/17/SpringBoot%20Profile/" class="article-date">
  <time datetime="2021-05-17T04:45:38.000Z" itemprop="datePublished">2021-05-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Spring/">Spring</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/05/17/SpringBoot%20Profile/">Spring 静态属性加载配置</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="前言：-Spring采用静态类作为配置，但是属性需要从配置文件加载"><a href="#前言：-Spring采用静态类作为配置，但是属性需要从配置文件加载" class="headerlink" title="前言： Spring采用静态类作为配置，但是属性需要从配置文件加载"></a>前言： Spring采用静态类作为配置，但是属性需要从配置文件加载</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Config</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String ip;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>启动报错</p>
<p> Autowired annotation is not supported on static fields: public static</p>
<p>解决： 新增set方法，在set方法进行 @Value注入</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Config</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String ip;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;config.ip&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setIp</span><span class="params">(String ip)</span> </span>&#123;</span><br><span class="line">        Config.ip = ip;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://hzxiao.top/2021/05/17/SpringBoot%20Profile/" data-id="ckory311k00034oe5fiki79ty" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring/" rel="tag">Spring</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="SpringBoot-Spring Config Static Properties" class="article article-type-SpringBoot" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/05/17/Spring%20Config%20Static%20Properties/" class="article-date">
  <time datetime="2021-05-17T01:45:38.000Z" itemprop="datePublished">2021-05-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/SpringBoot/">SpringBoot</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/05/17/Spring%20Config%20Static%20Properties/">SpringBoot 多环境 配置文件 profile</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="前言：-SpringBoot-工程一般都会有多份配置文件，例如-default，dev，test，prod-等等，需要快速切换配置文件"><a href="#前言：-SpringBoot-工程一般都会有多份配置文件，例如-default，dev，test，prod-等等，需要快速切换配置文件" class="headerlink" title="前言： SpringBoot  工程一般都会有多份配置文件，例如 default，dev，test，prod 等等，需要快速切换配置文件"></a>前言： SpringBoot  工程一般都会有多份配置文件，例如 default，dev，test，prod 等等，需要快速切换配置文件</h3><ol>
<li><p>多文件，文件格式 application-{profile}.properties 或  application-{profile}.yml</p>
<ol>
<li>新建配置dev，prod即可</li>
<li>application-dev.properties / application-dev.yml</li>
<li>application-prod.properties / application-prod.yml</li>
</ol>
</li>
<li><p>多文档，yml通过 “—“ 进行文档分割</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">server:</span><br><span class="line">  port: 80</span><br><span class="line">spring:</span><br><span class="line">  profiles:</span><br><span class="line">    active: dev</span><br><span class="line">---</span><br><span class="line">spring:</span><br><span class="line">  profiles: default</span><br><span class="line">server:</span><br><span class="line">  port: 80    </span><br><span class="line">---</span><br><span class="line">spring:</span><br><span class="line">  profiles: dev</span><br><span class="line">server:</span><br><span class="line">  port: 8080</span><br><span class="line">---</span><br><span class="line">spring:</span><br><span class="line">  profiles: prod</span><br><span class="line">server:</span><br><span class="line">  port: 8085</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>使用指定配置</p>
<ol>
<li><p>配置文件配置</p>
<p>在配置文件中使用配置项指定使用环境，不建议，因为需要修改配置文件，不利于生产环境切换。</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span> <span class="string">dev</span></span><br></pre></td></tr></table></figure>

<p>或</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">spring.profiles.active</span>=<span class="string">dev</span></span><br></pre></td></tr></table></figure></li>
<li><p>java命令行启动配置，启动的时候指定。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">   java -jar java.jar --spring.profiles.active=dev</span><br><span class="line">   或</span><br><span class="line">java -jar java.jar -Dspring.profiles.active=dev</span><br><span class="line">   </span><br></pre></td></tr></table></figure></li>
<li><p>Configuration配置，Idea启动配置环境，配置虚拟机用的不多，不建议使用。</p>
</li>
</ol>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://hzxiao.top/2021/05/17/Spring%20Config%20Static%20Properties/" data-id="ckos3x00o0003o8e5gcej6xsr" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SpringBoot/" rel="tag">SpringBoot</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">下一页 &amp;raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Docker/">Docker</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Hexo/">Hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/JavaScript/">JavaScript</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kettle/">Kettle</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Nginx-Vue/">Nginx Vue</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/">Spring</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/SpringBoot/">SpringBoot</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/ureport2/">ureport2</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker/" rel="tag">Docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/" rel="tag">Hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/" rel="tag">Java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kettle/" rel="tag">Kettle</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Nginx-Vue/" rel="tag">Nginx Vue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NodeJs/" rel="tag">NodeJs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring/" rel="tag">Spring</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SpringBoot/" rel="tag">SpringBoot</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ureport2/" rel="tag">ureport2</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/Docker/" style="font-size: 20px;">Docker</a> <a href="/tags/Hexo/" style="font-size: 15px;">Hexo</a> <a href="/tags/Java/" style="font-size: 10px;">Java</a> <a href="/tags/JavaScript/" style="font-size: 10px;">JavaScript</a> <a href="/tags/Kettle/" style="font-size: 15px;">Kettle</a> <a href="/tags/Nginx-Vue/" style="font-size: 10px;">Nginx Vue</a> <a href="/tags/NodeJs/" style="font-size: 10px;">NodeJs</a> <a href="/tags/Spring/" style="font-size: 10px;">Spring</a> <a href="/tags/SpringBoot/" style="font-size: 10px;">SpringBoot</a> <a href="/tags/ureport2/" style="font-size: 15px;">ureport2</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">六月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">五月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">四月 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/06/11/Docker%20Nginx/">Docker Nginx</a>
          </li>
        
          <li>
            <a href="/2021/06/10/Docker%20Jenkins%20Install/">Docker Jenkins 部署</a>
          </li>
        
          <li>
            <a href="/2021/06/10/Docker%20Jenkins%20Start%20Error%20/">Docker Start Permission denied 启动报错</a>
          </li>
        
          <li>
            <a href="/2021/06/10/Untitled/">(no title)</a>
          </li>
        
          <li>
            <a href="/2021/06/09/Docker%20Offline%20Install/">Docker 离线安装</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2021 hzx<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>